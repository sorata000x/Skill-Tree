import "./ViewOnlyTreePage.css";
import React, { useEffect, useState, createRef } from "react";
import { useStateValue } from "StateProvider";
import { Buttons } from "types";
import { SkillTree, SkillEdit } from "MainPage/components";

const skills = [{"id":"176429c0-8ce1-4656-bb2d-05c543a012d5","parent":"root","title":"Computer Science","level":0,"maxLevel":0,"increaseBy":1,"description":"","group":{"id":"10ce0082-186f-4904-b6ac-8bffed7eac96","name":"Computer Science","zoom":1},"treeOpen":true},{"id":"dc812b4c-3a7a-4145-afe4-958201a80e61","parent":"176429c0-8ce1-4656-bb2d-05c543a012d5","title":"Software Development","level":0,"maxLevel":0,"increaseBy":1,"description":"","group":{"id":"10ce0082-186f-4904-b6ac-8bffed7eac96","name":"Computer Science","zoom":1},"treeOpen":true},{"id":"66d0cffa-2763-4d11-8e1a-396c7eb16ebc","parent":"dc812b4c-3a7a-4145-afe4-958201a80e61","title":"Web Development","level":0,"maxLevel":0,"increaseBy":1,"description":"","group":{"id":"10ce0082-186f-4904-b6ac-8bffed7eac96","name":"Computer Science","zoom":1},"treeOpen":true},{"id":"ee9c064c-fba5-4e04-889f-f9f658d07b03","parent":"66d0cffa-2763-4d11-8e1a-396c7eb16ebc","title":"JavaScript HTML CSS","level":50,"maxLevel":100,"increaseBy":1,"description":"{\"blocks\":[{\"key\":\"aluaj\",\"text\":\"Classes\",\"type\":\"unordered-list-item\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"2upfh\",\"text\":\"       - CSE 110. Software Engineering\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"5i7oc\",\"text\":\"           - Fortune Telling Website (30+ hours)\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"bmas9\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","group":{"id":"10ce0082-186f-4904-b6ac-8bffed7eac96","name":"Computer Science","zoom":1},"treeOpen":true},{"id":"5682c842-7312-46f2-b5a9-9b08ae2205b1","parent":"ee9c064c-fba5-4e04-889f-f9f658d07b03","title":"React","level":40,"maxLevel":100,"increaseBy":1,"description":"{\"blocks\":[{\"key\":\"31nq4\",\"text\":\"Skill Tree Website (100 hours+)\",\"type\":\"unordered-list-item\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"8ke2r\",\"text\":\"Amazon Clone (8 hours)\",\"type\":\"unordered-list-item\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"deh7u\",\"text\":\"Tutorial (10 hours+)\",\"type\":\"unordered-list-item\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","group":{"id":"10ce0082-186f-4904-b6ac-8bffed7eac96","name":"Computer Science","zoom":1},"treeOpen":true},{"id":"ccb26d56-68e8-4612-a102-99d989950103","parent":"ee9c064c-fba5-4e04-889f-f9f658d07b03","title":"TypeScript","level":30,"maxLevel":50,"increaseBy":1,"description":"{\"blocks\":[{\"key\":\"2c8cq\",\"text\":\"Skill Tree Website (30 hours)\",\"type\":\"unordered-list-item\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"5969k\",\"text\":\"Tutorial (1 hour)\",\"type\":\"unordered-list-item\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","group":{"id":"10ce0082-186f-4904-b6ac-8bffed7eac96","name":"Computer Science","zoom":1},"treeOpen":true},{"id":"f7412e38-0869-4ddb-bfc4-b45547abe38c","parent":"ccb26d56-68e8-4612-a102-99d989950103","title":"Angular","level":1,"maxLevel":10,"increaseBy":1,"description":"{\"blocks\":[{\"key\":\"9i214\",\"text\":\"Angular Tutorial for Beginners: Learn Angular & TypeScript\",\"type\":\"unordered-list-item\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"offset\":0,\"length\":58,\"key\":0}],\"data\":{}},{\"key\":\"32cp7\",\"text\":\"Progress\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"8u5d5\",\"text\":\"9/15\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"ba0o6\",\"text\":\"[00:00]\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"ej5e1\",\"text\":\"16:52 -\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"fnvs5\",\"text\":\"[]\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"LINK\",\"mutability\":\"MUTABLE\",\"data\":{\"href\":\"https://www.youtube.com/watch?v=k5E2AVpwsko&ab_channel=ProgrammingwithMosh\",\"url\":\"https://www.youtube.com/watch?v=k5E2AVpwsko&ab_channel=ProgrammingwithMosh\"}}}}","group":{"id":"10ce0082-186f-4904-b6ac-8bffed7eac96","name":"Computer Science","zoom":1},"treeOpen":true},{"id":"df6b82bd-91d7-4c20-9a56-5f738ff72012","parent":"176429c0-8ce1-4656-bb2d-05c543a012d5","title":"Theorem, Algorithm, Data Structure","level":16,"maxLevel":20,"increaseBy":1,"description":"{\"blocks\":[{\"key\":\"ehlkj\",\"text\":\"Class: CSE 105. Theory of Computability (40+ hours)\",\"type\":\"unordered-list-item\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"offset\":7,\"length\":32,\"key\":0}],\"data\":{}},{\"key\":\"2siqm\",\"text\":\"Class: CSE 101. Algorithms II (40+ hours)\",\"type\":\"unordered-list-item\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"offset\":7,\"length\":22,\"key\":1}],\"data\":{}},{\"key\":\"dl87p\",\"text\":\"Class: CSE 100. Advanced Data Structures (40+ hours)\",\"type\":\"unordered-list-item\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"offset\":7,\"length\":33,\"key\":2}],\"data\":{}},{\"key\":\"1ehmp\",\"text\":\"Class: CSE 21. Algorithms (40+ hours)\",\"type\":\"unordered-list-item\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"offset\":7,\"length\":18,\"key\":3}],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"LINK\",\"mutability\":\"MUTABLE\",\"data\":{\"href\":\"https://sorata000x.github.io/About-Me/pages/educations/ucsd/cse105.html\",\"url\":\"https://sorata000x.github.io/About-Me/pages/educations/ucsd/cse105.html\"}},\"1\":{\"type\":\"LINK\",\"mutability\":\"MUTABLE\",\"data\":{\"href\":\"https://sorata000x.github.io/About-Me/pages/educations/ucsd/cse101.html\",\"url\":\"https://sorata000x.github.io/About-Me/pages/educations/ucsd/cse101.html\"}},\"2\":{\"type\":\"LINK\",\"mutability\":\"MUTABLE\",\"data\":{\"href\":\"https://sorata000x.github.io/About-Me/pages/educations/ucsd/cse100.html\",\"url\":\"https://sorata000x.github.io/About-Me/pages/educations/ucsd/cse100.html\"}},\"3\":{\"type\":\"LINK\",\"mutability\":\"MUTABLE\",\"data\":{\"href\":\"https://sorata000x.github.io/About-Me/pages/educations/ucsd/cse21.html\",\"url\":\"https://sorata000x.github.io/About-Me/pages/educations/ucsd/cse21.html\"}}}}","group":{"id":"10ce0082-186f-4904-b6ac-8bffed7eac96","name":"Computer Science","zoom":1},"treeOpen":true},{"id":"580fdff6-7644-41c8-99d6-bca86e101173","parent":"176429c0-8ce1-4656-bb2d-05c543a012d5","title":"AI","level":0,"maxLevel":0,"increaseBy":1,"description":"","group":{"id":"10ce0082-186f-4904-b6ac-8bffed7eac96","name":"Computer Science","zoom":1},"treeOpen":true},{"id":"ce23339d-d7f9-4960-82a4-04e087e9c61e","parent":"580fdff6-7644-41c8-99d6-bca86e101173","title":"PyTroch","level":10,"maxLevel":26,"increaseBy":1,"description":"{\"blocks\":[{\"key\":\"ammhr\",\"text\":\"Tutorial (10 hours)\",\"type\":\"unordered-list-item\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","group":{"id":"10ce0082-186f-4904-b6ac-8bffed7eac96","name":"Computer Science","zoom":1},"treeOpen":true},{"id":"1b8fb101-af82-4012-a101-6a79db09eebd","parent":"176429c0-8ce1-4656-bb2d-05c543a012d5","title":"Programming Language","level":0,"maxLevel":0,"increaseBy":1,"description":"","group":{"id":"10ce0082-186f-4904-b6ac-8bffed7eac96","name":"Computer Science","zoom":1},"treeOpen":true},{"id":"15ee803a-496d-4763-8447-c332260b07c5","parent":"1b8fb101-af82-4012-a101-6a79db09eebd","title":"Python","level":0,"maxLevel":0,"increaseBy":1,"description":"","group":{"id":"10ce0082-186f-4904-b6ac-8bffed7eac96","name":"Computer Science","zoom":1},"treeOpen":true},{"id":"96f69974-a7df-4ae3-bb12-c25579f3a370","parent":"1b8fb101-af82-4012-a101-6a79db09eebd","title":"Java","level":20,"maxLevel":50,"increaseBy":1,"description":"{\"blocks\":[{\"key\":\"38a9n\",\"text\":\"Chess Game (20+ hours)\",\"type\":\"unordered-list-item\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","group":{"id":"10ce0082-186f-4904-b6ac-8bffed7eac96","name":"Computer Science","zoom":1},"treeOpen":true},{"id":"b3958fa9-c9ed-4e97-9e25-33e6fbadc6f6","parent":"1b8fb101-af82-4012-a101-6a79db09eebd","title":"C++","level":50,"maxLevel":100,"increaseBy":1,"description":"{\"blocks\":[{\"key\":\"1re4p\",\"text\":\"Relational Database (50+ hours)\",\"type\":\"unordered-list-item\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","group":{"id":"10ce0082-186f-4904-b6ac-8bffed7eac96","name":"Computer Science","zoom":1},"treeOpen":true},{"id":"566be2d4-0c52-495b-8494-a8f368dcb236","parent":"580fdff6-7644-41c8-99d6-bca86e101173","title":"Algorithm","level":40,"maxLevel":100,"increaseBy":1,"description":"{\"blocks\":[{\"key\":\"68bq2\",\"text\":\"Classes\",\"type\":\"unordered-list-item\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"brjth\",\"text\":\"      - CSE 150B. AI: Search and Reasoning (40+ hours)\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","group":{"id":"10ce0082-186f-4904-b6ac-8bffed7eac96","name":"Computer Science","zoom":1},"treeOpen":true}]

const buttons: Buttons = {};
for (const s of skills) {
  buttons[s.id] = createRef();
}

export const ViewOnlyTreePage = () => {
  const [{activeSkill}, dispatch] = useStateValue(); 

  useEffect(() => {
    dispatch({
      type: "SET_THEME",
      theme: 'dark'
    })
  }, [])

  const handleMouseDown = (e: React.MouseEvent) => {
    // Cancel active skill
    dispatch({
      type: "SET_ACTIVE_SKILL",
      activeSkill: null,
    });
  };

  return (
    <div className="view_only_tree_page"> 
      <div className="container" onMouseDown={handleMouseDown}>
        <SkillTree skills={skills} buttons={buttons}/>
        <SkillEdit open={!!activeSkill} />
      </div>
    </div>
  )
}